<head>
	<link href="https://fonts.googleapis.com/css?family=Montserrat:300,400,700|Roboto:400,700" rel="stylesheet">
	<link href='style.css' rel='stylesheet' type='text/css'>
	<title>TransmedValues Results</title>
	<link rel="icon" type="x-icon" href="icon.png">
	<link rel="shortcut icon" type="x-icon" href="icon.png">
	<meta charset="utf-8">
	<script>
		version = "" //Remember to update this before making changes to the test itself!
	</script>
</head>
<script type="application/javascript"
		src="ideologies.js">
</script>

<body>
	<h1>TransmedValues</h1>
	<hr>

	<h1>Results</h1>
	<p>Keep in mind that the assigned labels next to each axis are mainly guesses or even jokes and shouldn't be taken as seriously as the values. Not that you should be taking this test very seriously at all, but you know what I mean.</p>

	<h2>Gender Axis: <span class="weight-300" id="gender-label"></span></h2>
	<div class="axis">
		<img id="img-binary" src="value_images/binary.svg" height="128pt" />
		<div class="bar binary" id="bar-binary"><div class="text-wrapper" id="binary"></div></div>
		<div class="bar non_binary" id="bar-non_binary"><div class="text-wrapper" id="non_binary"></div></div>
		<img id="img-nonbinary" src="value_images/nonbinary.svg" height="128pt" />
	</div>
	<h2>Dysphoria Axis: <span class="weight-300" id="dysphoria-label"></span></h2>
	<div class="axis">
		<img id="img-strict" src="value_images/strict.svg" height="128pt" />
		<div class="bar strict" id="bar-strict"><div class="text-wrapper" id="strict"></div></div>
		<div class="bar loose" id="bar-loose"><div class="text-wrapper" id="loose"></div></div>
		<img id="img-loose" src="value_images/loose.svg" height="128pt" />
	</div>
	<h2>Classification Axis: <span class="weight-300" id="classification-label"></span></h2>
	<div class="axis">
		<img id="img-protection" src="value_images/protection.svg" height="128pt" />
		<div class="bar protection" id="bar-protection"><div class="text-wrapper" id="protection"></div></div>
		<div class="bar abandonment" id="bar-abandonment"><div class="text-wrapper" id="abandonment"></div></div>
		<img id="img-abandonment" src="value_images/abandonment.svg" height="128pt" />
	</div>
	<h2>Outlook Axis: <span class="weight-300" id="outlook-label"></span></h2>
	<div class="axis">
		<img id="img-shame" src="value_images/shame.svg" height="128pt" />
		<div class="bar shame" id="bar-shame"><div class="text-wrapper" id="shame"></div></div>
		<div class="bar pride" id="bar-pride"><div class="text-wrapper" id="pride"></div></div>
		<img id="img-pride" src="value_images/pride.svg" height="128pt" />
	</div>
	<h2>Tolerance Axis: <span class="weight-300" id="tolerance-label"></span></h2>
	<div class="axis">
		<img id="img-intolerance" src="value_images/intolerance.svg" height="128pt" />
		<div class="bar intolerance" id="bar-intolerance"><div class="text-wrapper" id="intolerance"></div></div>
		<div class="bar tolerance" id="bar-tolerance"><div class="text-wrapper" id="tolerance"></div></div>
		<img id="img-tolerance" src="value_images/tolerance.svg" height="128pt" />
	</div>
	<h2>Alliance Axis: <span class="weight-300" id="alliance-label"></span></h2>
	<div class="axis">
		<img id="img-disunity" src="value_images/disunity.svg" height="128pt" />
		<div class="bar disunity" id="bar-disunity"><div class="text-wrapper" id="disunity"></div></div>
		<div class="bar unity" id="bar-unity"><div class="text-wrapper" id="unity"></div></div>
		<img id="img-unity" src="value_images/unity.svg" height="128pt" />
	</div>

	<h2>Closest Match: <span class="weight-300" id="ideology-label"></span></h2>
	<p>Ideological matching is a work in progress, and is much less accurate than the values and axes. Many of these ideologies have been made up for reference, because not many have actually been named. Not all of these are transmedicalist ideologies. Note that your closest match is stored in the URL; this means that if you bookmark this page and return at a later date when the test has changed, your closest match will not change (so you must retake the test if you want an updated match). This is because the match is based on your answers, not your results.</p>
	<p>You can send these results by copying and pasting the URL at the top of the page or using the image below. </p>
	<hr />
	<img src="" id="banner">
	<button class="button" onclick="location.href='index.html';">Back</button> <br>
	<script>
		function getQueryVariable(variable) {
			var query = window.location.search.substring(1)
			var vars = query.split("&")
			for (var i = 0; i < vars.length; i++) {
				var pair = vars[i].split("=")
				if (pair[0] == variable) { return pair[1] }
			}
			return (NaN);
		}

		function setBarValue(name, value) {
			innerel = document.getElementById(name)
			outerel = document.getElementById("bar-" + name)
			outerel.style.width = (value + "%")
			innerel.innerHTML = (value + "%")
			if (innerel.offsetWidth + 20 > outerel.offsetWidth) {
				innerel.style.visibility = "hidden"
			}
		}
        // –
		genderArray = ["Anti-NB", "NB-Critical", "NB-Skeptical", "Neutral", "NB-Supportive", "Pro-NB", "Gender Abolitionist"]
		dysphoriaArray = ["Very Strict", "Strict", "Strict-Leaning", "Neutral", "Loose-Leaning", "Loose", "Transgenderist"]
        classificationArray = ["Anti-Transgenderist", "Very Exclusive", "Exclusive", "Neutral", "Inclusive", "Pro-Abandonment", "Very Pro-Abandonment"]
        outlookArray = ["Cisphobic", "Very Proud", "Proud", "Neutral", "Ashamed", "Very Ashamed", "Eradicationist"]
        tolArray = ["Proud Ally", "Ally", "Accepting", "Neutral", "Heteronormative", "Very Heteronormative", "Homophobic"]
        allianceArray = ["Professional Anti-Extremist", "Anti-Extremist", "Afraid", "Neutral", "Unafraid", "Trans–Extremist Unity", "Total Trans–Extremist Unity"]

		function setLabel(val, ary) {
			if (val > 100) { return "" } else
				if (val > 90) { return ary[0] } else
					if (val > 75) { return ary[1] } else
						if (val > 60) { return ary[2] } else
							if (val >= 40) { return ary[3] } else
								if (val >= 25) { return ary[4] } else
									if (val >= 10) { return ary[5] } else
										if (val >= 0) { return ary[6] } else { return "" }
		}

        binary = getQueryVariable("binary")
        strict = getQueryVariable("strict")
        protection = getQueryVariable("protection")
        pride = getQueryVariable("pride")
        tolerance = getQueryVariable("tolerance")
        unity = getQueryVariable("unity")

		non_binary = (100 - binary).toFixed(1)
		loose = (100 - strict).toFixed(1)
		abandonment = (100 - protection).toFixed(1)
		shame = (100 - pride).toFixed(1)
		intolerance = (100 - tolerance).toFixed(1)
		disunity = (100 - unity).toFixed(1)

		setBarValue("binary", binary)
		setBarValue("non_binary", non_binary)
		setBarValue("strict", strict)
		setBarValue("loose", loose)
		setBarValue("protection", protection)
		setBarValue("abandonment", abandonment)
		setBarValue("pride", pride)
		setBarValue("shame", shame)

		setBarValue("tolerance", tolerance)
		setBarValue("intolerance", intolerance)
        setBarValue("unity", unity)
        setBarValue("disunity", disunity)

		document.getElementById("gender-label").innerHTML = setLabel(binary, genderArray)
		document.getElementById("dysphoria-label").innerHTML = setLabel(strict, dysphoriaArray)
		document.getElementById("classification-label").innerHTML = setLabel(protection, classificationArray)
		document.getElementById("outlook-label").innerHTML = setLabel(pride, outlookArray)
		document.getElementById("tolerance-label").innerHTML = setLabel(tolerance, tolArray)
        document.getElementById("alliance-label").innerHTML = setLabel(disunity, allianceArray)

		ideology = decodeURIComponent(getQueryVariable("ideology"))
		/*ideodist = Infinity
		for (var i = 0; i < ideologies.length; i++) {
			dist = 0
			dist += Math.pow(Math.abs(ideologies[i].stats.gender - binary), 2)
			dist += Math.pow(Math.abs(ideologies[i].stats.classification - protection), 2)
			dist += Math.pow(Math.abs(ideologies[i].stats.dysphoria - strict), 1.73856063)
			dist += Math.pow(Math.abs(ideologies[i].stats.outlook - pride), 1.73856063)
			dist += Math.pow(Math.abs(ideologies[i].stats.tol - tolerance), 2)
            dist += Math.pow(Math.abs(ideologies[i].stats.alliance - unity), 2)
			if (dist < ideodist) {
				ideology = ideologies[i].name
				ideodist = dist
			}
		}*/
		document.getElementById("ideology-label").innerHTML = ideology

		function createImage(src, x, y, w, h) {
			img = new Image()
			img.src = src
			img.onLoad = function () {
				ctx.drawImage(img, x, y, w, h)
			}
		}

		window.onload = function () {
			var c = document.createElement("canvas")
			var ctx = c.getContext("2d")
			c.width = 800;
			c.height = 950;
			ctx.fillStyle = "#EEEEEE"
			ctx.fillRect(0, 0, 800, 950);

			img = document.getElementById("img-binary")
			ctx.drawImage(img, 20, 170, 100, 100);
			img = document.getElementById("img-nonbinary")
			ctx.drawImage(img, 680, 170, 100, 100)
			img = document.getElementById("img-strict")
			ctx.drawImage(img, 20, 290, 100, 100)
			img = document.getElementById("img-loose")
			ctx.drawImage(img, 680, 290, 100, 100)
			img = document.getElementById("img-protection")
			ctx.drawImage(img, 20, 410, 100, 100)
			img = document.getElementById("img-abandonment")
			ctx.drawImage(img, 680, 410, 100, 100)
			img = document.getElementById("img-shame")
			ctx.drawImage(img, 20, 530, 100, 100)
			img = document.getElementById("img-pride")
            ctx.drawImage(img, 680, 530, 100, 100)
            img = document.getElementById("img-intolerance")
            ctx.drawImage(img, 20, 650, 100, 100)
            img = document.getElementById("img-tolerance")
            ctx.drawImage(img, 680, 650, 100, 100)
            img = document.getElementById("img-disunity")
            ctx.drawImage(img, 20, 770, 100, 100)
            img = document.getElementById("img-unity")
            ctx.drawImage(img, 680, 770, 100, 100)

			ctx.fillStyle = "#222222"
			ctx.fillRect(120, 180, 560, 80)
			ctx.fillRect(120, 300, 560, 80)
			ctx.fillRect(120, 420, 560, 80)
			ctx.fillRect(120, 540, 560, 80)
            ctx.fillRect(120, 660, 560, 80)
            ctx.fillRect(120, 780, 560, 80)
			ctx.fillStyle = "#f44336"
			ctx.fillRect(120, 184, 5.6 * binary - 2, 72)
			ctx.fillStyle = "#00897b"
			ctx.fillRect(682 - 5.6 * non_binary, 184, 5.6 * non_binary - 2, 72)
			ctx.fillStyle = "#ff9800"
			ctx.fillRect(120, 304, 5.6 * strict - 2, 72)
			ctx.fillStyle = "#03a9f4"
            ctx.fillRect(682 - 5.6 * loose, 304, 5.6 * loose - 2, 72)
			ctx.fillStyle = "#ffeb3b"
			ctx.fillRect(120, 424, 5.6 * protection - 2, 72)
			ctx.fillStyle = "#3f51b5"
			ctx.fillRect(682 - 5.6 * abandonment, 424, 5.6 * abandonment - 2, 72)
			ctx.fillStyle = "#8bc34a"
			ctx.fillRect(120, 544, 5.6 * shame - 2, 72)
			ctx.fillStyle = "#9c27b0"
			ctx.fillRect(682 - 5.6 * pride, 544, 5.6 * pride - 2, 72)

            ctx.fillStyle = "#732724"
			ctx.fillRect(120, 664, 5.6 * intolerance - 2, 72)
            ctx.fillStyle = "#40c34a"
			ctx.fillRect(682 - 5.6 * tolerance, 664, 5.6 * tolerance - 2, 72)

            ctx.fillStyle = "#b4ffff"
			ctx.fillRect(120, 784, 5.6 * disunity - 2, 72)
            ctx.fillStyle = "#ff8718"
			ctx.fillRect(682 - 5.6 * unity, 784, 5.6 * unity - 2, 72)

			ctx.fillStyle = "#222222"
			ctx.font = "700 80px Montserrat"
			ctx.textAlign = "left"
			ctx.fillText("", 20, 90)
			ctx.font = "50px Montserrat"
			ctx.fillText(ideology, 20, 140)

			ctx.textAlign = "left"
			if (binary > 30) { ctx.fillText(binary + "%", 130, 237.5) }
			if (strict > 30) { ctx.fillText(strict + "%", 130, 357.5) }
			if (protection > 30) { ctx.fillText(protection + "%", 130, 477.5) }
			if (shame > 30) { ctx.fillText(shame + "%", 130, 597.5) }
			if (intolerance > 30) { ctx.fillText(intolerance + "%", 130, 717.5) }
			if (disunity > 30) { ctx.fillText(disunity + "%", 130, 837.5) }
			ctx.textAlign = "right"
			if (non_binary > 30) { ctx.fillText(non_binary + "%", 670, 237.5) }
            if (loose > 30) { ctx.fillText(loose + "%", 670, 357.5) }
			if (abandonment > 30) { ctx.fillText(abandonment + "%", 670, 477.5) }
			if (pride > 30) { ctx.fillText(pride + "%", 670, 597.5) }
			if (tolerance > 30) { ctx.fillText(tolerance + "%", 670, 717.5) }
			if (unity > 30) { ctx.fillText(unity + "%", 670, 837.5) }

			ctx.font = "300 30px Montserrat"
			ctx.fillText("", 780, 60)
			ctx.fillText(version, 780, 90)
			ctx.textAlign = "center"
			ctx.fillText("Gender Axis: " + document.getElementById("gender-label").innerHTML, 400, 175)
			ctx.fillText("Dysphoria Axis: " + document.getElementById("dysphoria-label").innerHTML, 400, 295)
            ctx.fillText("Classification Axis: " + document.getElementById("classification-label").innerHTML, 400, 415)
			ctx.fillText("Outlook Axis: " + document.getElementById("outlook-label").innerHTML, 400, 535)
			ctx.fillText("Tolerance Axis: " + document.getElementById("tolerance-label").innerHTML, 400, 655)
			ctx.fillText("Alliance Axis: " + document.getElementById("alliance-label").innerHTML, 400, 775)

			document.getElementById("banner").src = c.toDataURL();
		}
	</script>
</body>
